<!-- certificates/my_certificates.html -->

{% extends 'base.html' %}
{% load static %}

{% block title %}My Certificates - Voluntree{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/certificates/my_certificates.css' %}">
{% endblock %}

{% block content %}
<div class="certificates-container">
    <div class="page-header">
        <h1>🏆 My Certificates</h1>
        <p>View and download all your earned certificates</p>
    </div>

    {% if assignments %}
    <div class="certificates-grid">
        {% for assignment in assignments %}
        <div class="certificate-card">
            <div class="certificate-header">
                <div class="certificate-icon">📜</div>
                <div class="certificate-title">
                    <h3>{{ assignment.certificate.event.title }}</h3>
                    <div class="event-date">{{ assignment.certificate.event.date|date:"F d, Y" }}</div>
                </div>
            </div>

            <div class="certificate-details">
                <div class="detail-row">
                    <span class="detail-label">Organization:</span>
                    <span class="detail-value">{{ assignment.certificate.event.ngo.organization_name }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Location:</span>
                    <span class="detail-value">{{ assignment.certificate.event.location|truncatewords:3 }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Date Issued:</span>
                    <span class="detail-value">{{ assignment.assigned_at|date:"M d, Y" }}</span>
                </div>
            </div>

            <div class="certificate-footer">
                <div class="assigned-date">
                    ✓ Earned {{ assignment.assigned_at|timesince }} ago
                </div>
                <a href="{{ assignment.certificate.certificate_file.url }}" class="download-btn" download>
                    📥 Download
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-certificates">
        <div class="no-certificates-icon">📜</div>
        <h2>No Certificates Yet</h2>
        <p>You haven't earned any certificates yet. Participate in events to earn certificates!</p>
        <a href="{% url 'event_list' %}" class="browse-events-btn">Browse Events</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/certificates/my_certificates.js' %}"></script>
{% endblock %}